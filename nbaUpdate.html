<!DOCTYPE html>
<html>
<head>
    <title>NBA</title>

    <!--Style sheets-->
    <link rel="stylesheet" href="./stylesheets/style.css">

    <!--Bootstrap-->
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css" rel="stylesheet" />

</head>
<body>

    <div class="container">
        <div id="table"></div>
        <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
        <script src="./js/getnba.js"></script>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="home-button">
                <button class="btn btn-secondary" onclick="window.location.href='nba.html'">Add NBA</button>
                <button class="btn btn-secondary" onclick="window.location.href='nba.html'">Update NBA</button>
            </div>
        </div>
    </div>

    <h1 class="pages-text-center">NBA Screen</h1>

    <!-- CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>

    <!-- This is for toast messages-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="./js/jquery.toaster.js"></script>

    <!-- Add NBA Form -->
    <form id="addnbaForm" class="form">
        <div class="form-group">
            <label for="id"><b>ID:</b></label>
            <input name="id" id="id" type="text" class="form-control" placeholder="Input ID">
        </div>

        <div class="form-group">
            <label for="Player"><b>Player:</b></label>
            <input name="Player" id="Player" type="text" class="form-control" placeholder="Input Player">
        </div>

        <div class="form-group">
            <label for="Team"><b>Team:</b></label>
            <input name="Team" id="Team" type="text" class="form-control" placeholder="Input Team">
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>
        </div>
    </form>

    <script>
        document.getElementById('addnbaForm').addEventListener('submit', function(event) {
            event.preventDefault(); 
            const formData = {
                id: document.getElementById('id').value,
                NBAPlayer: document.getElementById('Player').value,
                NBATeam: document.getElementById('Team').value
            };
            
            fetch('http://localhost:8500/api/v1/nba', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                alert('Record has been saved.');
                window.location.href = 'nba.html';
            })
            .catch(error => console.error('Error:', error));
        });
    </script>

</body>
</html>
